import{r as t,h as s,g as i}from"./p-af0f8efd.js";const l=class{constructor(i){t(this,i),this.cacheQS=(new Date).getTime()+"",this.mode="input",this.start=()=>{if(!this.urls)return;const t=new Set;for(let s of this.urls.split(/[\r\n]+/))(s=s.trim())&&t.add(s);0!=t.size&&(this.urlList=[...t],this.checkPos=0,this.results=[],this.mode="check")},this.renderInput=()=>[s("div",{class:"urls-box"},s("textarea",{class:"textarea",placeholder:"Input image urls ...",onInput:t=>{this.urls=t.target.value.trim()},value:this.urls})),s("div",{class:"start-box"},s("button",{class:"button large is-primary",disabled:!this.urls,onClick:()=>{this.start()}},"START"))],this.imgSuccess=t=>{this.results.push({url:this.urlList[this.checkPos],time:new Date,err:t}),this.checkPos==this.urlList.length-1?this.mode="end":this.checkPos++},this.download=()=>{let t="URL,STATUS\r\n";for(const s of this.results)t+=`${s.url},${s.err?"ERROR":"OK"}\r\n`;const s=new Blob([t],{type:"text/plain"}),i=this.element.querySelector(".download-box").querySelector("a");i.download="imageurls.csv",i.href=URL.createObjectURL(s),i.click()},this.renderProcess=()=>{const t=this.urlList[this.checkPos];let i="",l="";return"check"==this.mode&&((i=t).indexOf("?")<0?i+="?"+this.cacheQS:i+="&"+this.cacheQS,l=t),[s("div",{class:"img-box"},(()=>{if(i)return s("img",{src:i,onLoad:()=>{this.imgSuccess(!1)},onError:()=>{this.imgSuccess(!0)}});const t=[];let l=0;for(const i of this.results)if(t.push(s("tr",null,s("td",null,i.url),s("td",null,i.err?"ERROR":"OK"))),++l>1e3){t.push(s("tr",null,s("td",{class:"has-text-centered",colSpan:2},s("div",null,"ï¸™"),s("div",{class:"has-text-danger"},"PLEASE DOWNLOAD RESULTS"))));break}return[s("table",{class:"table is-fullwidth"},s("thead",null,s("tr",null,s("th",null,"URL"),s("th",null,"STATUS"))),s("tbody",null,t))]})()),s("div",{class:"progress-box"},s("progress",{class:"progress is-primary",value:this.checkPos+1,max:this.urlList.length}),s("div",{class:"msg-box"},s("span",{class:"msg"},l),s("span",null,this.checkPos+1,"/",this.urlList.length))),s("div",{class:"download-box"},s("button",{class:"button is-success",onClick:()=>{this.download()}},"DOWNLOAD RESULTS(CSV)"),s("a",null)),s("div",{class:"back-box"},s("button",{class:"button is-light",onClick:()=>{this.mode="input"}},"BACK"))]}}render(){return s("div",{class:"app-home"},s("header",null,s("h1",null,"Image URL Cheker")),"input"==this.mode&&this.renderInput(),"input"!=this.mode&&this.renderProcess())}get element(){return i(this)}static get style(){return"app-home .app-home{padding:10px}app-home header{padding:5px;text-align:center}app-home header h1{font-size:25px}app-home .urls-box textarea{height:400px}app-home .start-box{text-align:center;margin-top:10px}app-home .img-box{text-align:center;height:300px;overflow:scroll}app-home .img-box img{max-width:80%;height:100%}app-home .progress-box{margin-top:10px}app-home .progress-box .progress{margin-bottom:0}app-home .progress-box .msg-box{display:-ms-flexbox;display:flex}app-home .progress-box .msg-box .msg{-ms-flex-positive:2;flex-grow:2}app-home .download-box{margin-top:10px;text-align:center}app-home .download-box a{display:none}app-home .back-box{margin-top:20px;text-align:center}"}};export{l as app_home};